# wepback和vite的区别

## 为什么需要打包工具？
- 未打包的项目文件很多，都上传到服务器，用户请求时会发大量的http请求，服务器压力大且用户体验不好；
- 前端需要模块化开发，浏览器本身并不支持，打包工具可以将模块化代码转化为浏览器支持的代码
- 减少源码暴露风险，打包可以重组并混淆源码
- 提供开发服务器

## 两种打包方式
webpack和vite两个打包工具的主要差别在于启动方式不同：（vite把更多的事情交给浏览器去做，引入了协商缓存和强缓存）

webpack先打包，再启动开发服务器，请求服务器时直接给予打包后的结果（逐级递归分析依赖->打包->本地服务器渲染）

vite直接启动开发服务器，请求哪个模块再对哪个模块进行实时编译。由于启动时不需要打包，也就不需要分析模块依赖、编译，所以启动过程非常快。

关于HMR，当改动了某个模块后，vite只需要重新请求该模块，而webpack需要将该模块的所有依赖重新编译

由于现代浏览器本身就支持ESM，会主动发起请求去获取文件。vite就是充分利用了这个特点，将开发环境下的模块文件，直接作为浏览器要执行的文件。由于vite使用的是ESM，所以代码中不可以用CommonJS